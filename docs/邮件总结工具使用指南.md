# 📧 邮件总结工具快速使用指南

## 🚀 快速开始

### 第一步：运行配置向导
```bash
python setup_config.py
```
这个向导会帮你：
- 设置 OpenAI API Key
- 选择邮箱服务商（QQ/163/阿里云）
- 配置邮箱账号和授权码
- 可选的代理设置

### 第二步：开始总结邮件
```bash
python email_summarizer.py
```
然后输入你想要总结的邮件数量（1-50封）。

## 📋 详细配置说明

### 1. 获取 OpenAI API Key
1. 访问 [OpenAI官网](https://platform.openai.com/)
2. 注册/登录账号
3. 进入 API Keys 页面
4. 创建新的 API Key
5. 复制保存（只显示一次）

### 2. 获取邮箱授权码

#### QQ邮箱：
1. 登录 QQ邮箱网页版
2. 设置 → 账户 → POP3/IMAP/SMTP/Exchange/CardDAV/CalDAV服务
3. 开启 IMAP/SMTP 服务
4. 获取授权码（16位字符）

#### 163邮箱：
1. 登录 163邮箱网页版
2. 设置 → POP3/SMTP/IMAP
3. 开启 IMAP/SMTP 服务
4. 获取授权码

#### 阿里云邮箱：
1. 登录阿里云邮箱
2. 邮箱设置 → 邮箱账户
3. 开启 IMAP/SMTP 服务
4. 获取授权码

## 🔧 手动配置（高级用户）

如果你不想使用配置向导，可以手动编辑 `.env` 文件：

```env
# OpenAI API Key
OPENAI_API_KEY="sk-your-openai-api-key"

# 邮箱服务选择
EMAIL_USE="QQ"

# 邮箱配置
EMAIL_CONFIGS='{
    "QQ": {
        "smtp_host": "smtp.qq.com",
        "smtp_port": 465,
        "imap_host": "imap.qq.com",
        "username": "your-email@qq.com",
        "password": "your-16-digit-auth-code"
    }
}'

# 可选：代理设置
# HTTP_PROXY="http://127.0.0.1:7890"
# HTTPS_PROXY="http://127.0.0.1:7890"
```

## 💡 使用技巧

### 1. 自定义总结需求
你可以修改 `email_summarizer.py` 中的提示词来自定义总结方式：
- 按发件人分类
- 按主题分类
- 只总结重要邮件
- 提取待办事项

### 2. 在代码中使用
```python
from universal_email_tool import UniversalEmailToolReading
from langchain_openai import ChatOpenAI

# 创建工具实例
email_tool = UniversalEmailToolReading()

# 直接调用
result = email_tool._run(num_emails=10)
print(result)
```

### 3. 批量处理
可以创建定时任务，每天自动总结邮件：
```bash
# 添加到 crontab
0 9 * * * cd /path/to/project && python email_summarizer.py
```

## ⚠️ 注意事项

### 安全提醒
1. **不要分享你的 API Key 和邮箱授权码**
2. **`.env` 文件已添加到 `.gitignore`，不会被提交到版本控制**
3. **建议定期更换授权码**

### 常见问题

#### 1. 连接邮箱失败
- 检查邮箱授权码是否正确
- 确认已开启 IMAP 服务
- 检查网络连接

#### 2. OpenAI API 调用失败
- 检查 API Key 是否正确
- 确认账户有足够余额
- 如在国内，可能需要配置代理

#### 3. 总结质量不满意
- 可以调整提示词
- 增加邮件数量获得更全面的总结
- 尝试不同的 GPT 模型

### 性能优化
1. **邮件数量建议**：10-20封获得最佳总结效果
2. **网络优化**：如果 API 调用较慢，建议配置代理
3. **成本控制**：GPT-4 调用有成本，建议合理使用

## 🔄 更新和维护

### 更新依赖
```bash
pip install --upgrade langchain langchain-openai
```

### 查看日志
运行时会显示详细的处理过程，如果遇到问题可以根据日志信息排查。

## 📞 获取帮助

如果遇到问题：
1. 检查配置是否正确
2. 查看错误日志信息
3. 参考项目的 README 文档
4. 检查网络连接和服务状态

---

🎉 **现在你可以开始使用邮件总结工具了！**